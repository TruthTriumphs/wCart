<!-- Wappler include head-page="index.html" appconnect="local" is="dmx-app" bootstrap4="local" fontawesome_5="cdn" jquery_slim_33="local" id="products" components="{&quot;dmxFormatter&quot;:{}}" -->
<section id="products">
	<div class="container">
		<div class="row">
			<div class="col-12">
				<h1 class="mt-3" dmx-show="(params.category != &quot;all&quot;)">{{dvMetaTags.data[0].metaPage}}</h1>
				<h1 class="mt-3" dmx-show="(params.category == &quot;all&quot;)">Products</h1>
			</div>
		</div>
		<div class="row mt-4" is="dmx-repeat" id="rptProducts" dmx-bind:repeat="dvProducts.data">
			<div class="col-12 col-md-4 col-lg-3">
				<div class="card h-100 d-flex">
					<!-- <div dmx-repeat:rptimages="qryImages"> -->
					<img class="card-img-top flex-grow-1 img-fluid" alt="Card image cap" dmx-bind:src="assets/images/products/{{ProductID}}/thumbs/{{qryImages[0].ProductImageFile}}" dmx-show="qryImages.hasItems()">
					<!-- </div> -->
					<img class="card-img-top flex-grow-1 img-fluid" alt="Card image cap" src="assets/images/products/no-image.jpg" dmx-hide="qryImages.hasItems()">
					<div class="card-body">
						<h4 class="card-title" dmx-text="ProductName">Card title</h4>
						<p class="card-text" dmx-html="ProductShortDesc"></p>
						<p dmx-text="ProductPrice.formatCurrency(&quot;$&quot;, &quot;.&quot;, &quot;,&quot;, &quot;2&quot;)"></p>
					</div>
					<div class="card-footer pt-0 pb-0 pl-0 pr-0">
						<input id="inp_pid" name="pid" type="hidden" dmx-bind:value="ProductID">
						<input id="inp_product" name="product" type="hidden" dmx-bind:value="ProductName">
						<input id="inp_price" name="price" type="hidden" dmx-bind:value="ProductPrice">
						<input id="inp_qty" name="qty" type="hidden" value="1">
						<input id="inp_subtotal" name="subtotal" dmx-bind:value="(ProductPrice * inp_qty.value)" type="hidden">
						<button class="btn btn-primary btn-block" dmx-on:click="arrPID.add(inp_pid.value);arrSubtotal.add(inp_subtotal.value);arrCart.add({product:inp_product.value,qty:inp_qty.value,price:inp_price.value});browser.goto('./cart')"
							dmx-hide="localStorage.data.pid.contains(inp_pid.value)">Add to Cart</button>
						<button class="btn btn-outline-primary btn-block disabled mt-0" dmx-show="localStorage.data.pid.contains(inp_pid.value)">Already Added to Cart</button>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>